<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="004-insert-trophies" author="claude" context="test-data">
        <preConditions onFail="MARK_RAN" onError="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT COUNT(*) FROM trophies WHERE code = 'FIRST_STEPS'
            </sqlCheck>
        </preConditions>

        <comment>Insert trophy definitions for gamification</comment>

        <!-- Distance Milestone Trophies -->
        <insert tableName="trophies">
            <column name="code" value="FIRST_STEPS"/>
            <column name="name" value="Erste Schritte"/>
            <column name="description" value="Absolviere deinen ersten Lauf von mindestens 1km"/>
            <column name="type" value="DISTANCE_MILESTONE"/>
            <column name="category" value="BEGINNER"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/running.png"/>
            <column name="criteria_value" valueNumeric="1000"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="1"/>
        </insert>

        <insert tableName="trophies">
            <column name="code" value="5K_CHAMPION"/>
            <column name="name" value="5K Champion"/>
            <column name="description" value="Laufe 5 Kilometer am Stück"/>
            <column name="type" value="DISTANCE_MILESTONE"/>
            <column name="category" value="BEGINNER"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/medal.png"/>
            <column name="criteria_value" valueNumeric="5000"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="2"/>
        </insert>

        <insert tableName="trophies">
            <column name="code" value="10K_HERO"/>
            <column name="name" value="10K Held"/>
            <column name="description" value="Absolviere einen 10 Kilometer Lauf"/>
            <column name="type" value="DISTANCE_MILESTONE"/>
            <column name="category" value="INTERMEDIATE"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/trophy.png"/>
            <column name="criteria_value" valueNumeric="10000"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="3"/>
        </insert>

        <insert tableName="trophies">
            <column name="code" value="HALF_MARATHON_MASTER"/>
            <column name="name" value="Halbmarathon Meister"/>
            <column name="description" value="Laufe einen halben Marathon (21.1 km)"/>
            <column name="type" value="DISTANCE_MILESTONE"/>
            <column name="category" value="ADVANCED"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/medal-first-place.png"/>
            <column name="criteria_value" valueNumeric="21100"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="4"/>
        </insert>

        <insert tableName="trophies">
            <column name="code" value="MARATHON_LEGEND"/>
            <column name="name" value="Marathon Legende"/>
            <column name="description" value="Absolviere einen Marathon (42.2 km)"/>
            <column name="type" value="DISTANCE_MILESTONE"/>
            <column name="category" value="ELITE"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/olympic-rings.png"/>
            <column name="criteria_value" valueNumeric="42195"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="5"/>
        </insert>

        <!-- Streak Trophies -->
        <insert tableName="trophies">
            <column name="code" value="WEEK_WARRIOR"/>
            <column name="name" value="Wochenkrieger"/>
            <column name="description" value="Laufe 7 Tage in Folge"/>
            <column name="type" value="STREAK"/>
            <column name="category" value="INTERMEDIATE"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/fire-element.png"/>
            <column name="criteria_value" valueNumeric="7"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="10"/>
        </insert>

        <insert tableName="trophies">
            <column name="code" value="MONTH_MARATHON"/>
            <column name="name" value="Monats-Marathon"/>
            <column name="description" value="Laufe 30 Tage in Folge"/>
            <column name="type" value="STREAK"/>
            <column name="category" value="ADVANCED"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/calendar.png"/>
            <column name="criteria_value" valueNumeric="30"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="11"/>
        </insert>

        <!-- Route Completion Trophies -->
        <insert tableName="trophies">
            <column name="code" value="ROUTE_EXPLORER"/>
            <column name="name" value="Routen-Explorer"/>
            <column name="description" value="Absolviere 5 verschiedene vordefinierte Routen"/>
            <column name="type" value="ROUTE_COMPLETION"/>
            <column name="category" value="INTERMEDIATE"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/map.png"/>
            <column name="criteria_value" valueNumeric="5"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="20"/>
        </insert>

        <insert tableName="trophies">
            <column name="code" value="ROUTE_MASTER"/>
            <column name="name" value="Routen-Meister"/>
            <column name="description" value="Absolviere 10 verschiedene vordefinierte Routen"/>
            <column name="type" value="ROUTE_COMPLETION"/>
            <column name="category" value="ADVANCED"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/worldwide-location.png"/>
            <column name="criteria_value" valueNumeric="10"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="21"/>
        </insert>

        <!-- Time-Based Trophies -->
        <insert tableName="trophies">
            <column name="code" value="EARLY_BIRD"/>
            <column name="name" value="Früher Vogel"/>
            <column name="description" value="Starte 10 Läufe vor 7 Uhr morgens"/>
            <column name="type" value="TIME_BASED"/>
            <column name="category" value="SPECIAL"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/sunrise.png"/>
            <column name="criteria_value" valueNumeric="10"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="30"/>
        </insert>

        <insert tableName="trophies">
            <column name="code" value="NIGHT_RUNNER"/>
            <column name="name" value="Nacht-Läufer"/>
            <column name="description" value="Absolviere 10 Läufe nach 21 Uhr"/>
            <column name="type" value="TIME_BASED"/>
            <column name="category" value="SPECIAL"/>
            <column name="icon_url" value="https://img.icons8.com/color/96/000000/moon-star.png"/>
            <column name="criteria_value" valueNumeric="10"/>
            <column name="is_active" valueBoolean="true"/>
            <column name="display_order" valueNumeric="31"/>
        </insert>

        <rollback>
            <delete tableName="trophies">
                <where>code IN ('FIRST_STEPS', '5K_CHAMPION', '10K_HERO', 'HALF_MARATHON_MASTER', 'MARATHON_LEGEND',
                'WEEK_WARRIOR', 'MONTH_MARATHON', 'ROUTE_EXPLORER', 'ROUTE_MASTER', 'EARLY_BIRD', 'NIGHT_RUNNER')</where>
            </delete>
        </rollback>
    </changeSet>

</databaseChangeLog>
