<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="005-insert-competitions" author="claude" context="test-data">
        <comment>Insert sample competitions and challenges</comment>

        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT COUNT(*) FROM competitions WHERE name = 'Frankfurt 5K Challenge'
            </sqlCheck>
        </preConditions>

        <!-- Active Competition 1: Frankfurt 5K Challenge -->
        <insert tableName="competitions">
            <column name="name" value="Frankfurt 5K Challenge"/>
            <column name="description" value="Laufe die schnellste 5K Zeit in diesem Monat! Messe dich mit anderen Läufern aus Frankfurt."/>
            <column name="competition_type" value="FASTEST_5K"/>
            <column name="start_date" valueComputed="DATE_SUB(NOW(), INTERVAL 5 DAY)"/>
            <column name="end_date" valueComputed="DATE_ADD(NOW(), INTERVAL 25 DAY)"/>
            <column name="status" value="ACTIVE"/>
            <column name="difficulty" value="INTERMEDIATE"/>
            <column name="max_participants" valueNumeric="100"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Mindestens ein abgeschlossener 5K Lauf"/>
            <column name="rules" value="Es zählt nur der schnellste 5K Lauf während des Wettbewerbszeitraums. GPS-Tracking erforderlich."/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>

        <!-- Active Competition 2: Main-Ufer Distance Race -->
        <insert tableName="competitions">
            <column name="name" value="Main-Ufer Distance Race"/>
            <column name="description" value="Wer läuft die meisten Kilometer am Mainufer? Alle Routen am Main zählen!"/>
            <column name="competition_type" value="MOST_DISTANCE"/>
            <column name="start_date" valueComputed="DATE_SUB(NOW(), INTERVAL 10 DAY)"/>
            <column name="end_date" valueComputed="DATE_ADD(NOW(), INTERVAL 20 DAY)"/>
            <column name="status" value="ACTIVE"/>
            <column name="difficulty" value="BEGINNER"/>
            <column name="max_participants" valueNumeric="200"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Keine besonderen Anforderungen"/>
            <column name="rules" value="Alle Läufe auf den Main-Ufer Routen zählen zur Gesamtdistanz. Der Läufer mit der höchsten Gesamtdistanz gewinnt."/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>

        <!-- Active Competition 3: 30-Day Consistency Challenge -->
        <insert tableName="competitions">
            <column name="name" value="30-Tage Konsistenz Challenge"/>
            <column name="description" value="Laufe jeden Tag im Monat mindestens 2 Kilometer. Schaffe 30 Tage in Folge!"/>
            <column name="competition_type" value="CONSISTENCY_CHALLENGE"/>
            <column name="start_date" valueComputed="DATE_SUB(NOW(), INTERVAL 7 DAY)"/>
            <column name="end_date" valueComputed="DATE_ADD(NOW(), INTERVAL 23 DAY)"/>
            <column name="status" value="ACTIVE"/>
            <column name="difficulty" value="INTERMEDIATE"/>
            <column name="max_participants" valueNumeric="50"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Bereitschaft, jeden Tag zu laufen"/>
            <column name="rules" value="Mindestens 2km pro Tag. Kein Tag darf ausgelassen werden. Wer alle 30 Tage schafft, gewinnt."/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>

        <!-- Upcoming Competition: Ostpark 10K Speed Run -->
        <insert tableName="competitions">
            <column name="name" value="Ostpark 10K Speed Run"/>
            <column name="description" value="Schnellster 10K Lauf im Ostpark. Perfekte flache Strecke für persönliche Bestzeiten!"/>
            <column name="competition_type" value="FASTEST_10K"/>
            <column name="start_date" valueComputed="DATE_ADD(NOW(), INTERVAL 5 DAY)"/>
            <column name="end_date" valueComputed="DATE_ADD(NOW(), INTERVAL 35 DAY)"/>
            <column name="status" value="UPCOMING"/>
            <column name="difficulty" value="INTERMEDIATE"/>
            <column name="max_participants" valueNumeric="75"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Mindestens ein abgeschlossener 10K Lauf"/>
            <column name="rules" value="Es zählt nur der schnellste 10K Lauf auf der Ostpark Route während des Wettbewerbszeitraums."/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>

        <!-- Upcoming Competition: Stadtwald Trail Master -->
        <insert tableName="competitions">
            <column name="name" value="Stadtwald Trail Master"/>
            <column name="description" value="Bezwinge die härteste Trail-Strecke Frankfurts! Höhenmeter und Zeit zählen."/>
            <column name="competition_type" value="ELEVATION_CHALLENGE"/>
            <column name="start_date" valueComputed="DATE_ADD(NOW(), INTERVAL 10 DAY)"/>
            <column name="end_date" valueComputed="DATE_ADD(NOW(), INTERVAL 40 DAY)"/>
            <column name="status" value="UPCOMING"/>
            <column name="difficulty" value="ADVANCED"/>
            <column name="max_participants" valueNumeric="40"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Trail-Running Erfahrung empfohlen"/>
            <column name="rules" value="Wer die Stadtwald Trail Route mit der besten Zeit absolviert, gewinnt. Mindestens 180 Höhenmeter erforderlich."/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>

        <!-- Completed Competition: Winter Marathon Challenge -->
        <insert tableName="competitions">
            <column name="name" value="Winter Marathon Challenge"/>
            <column name="description" value="Laufe im Winter einen Marathon oder sammle die Marathon-Distanz über mehrere Läufe."/>
            <column name="competition_type" value="MOST_DISTANCE"/>
            <column name="start_date" valueComputed="DATE_SUB(NOW(), INTERVAL 60 DAY)"/>
            <column name="end_date" valueComputed="DATE_SUB(NOW(), INTERVAL 5 DAY)"/>
            <column name="status" value="COMPLETED"/>
            <column name="difficulty" value="ELITE"/>
            <column name="max_participants" valueNumeric="30"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Erfahrung mit Langstreckenläufen"/>
            <column name="rules" value="Gesamtdistanz von mindestens 42.2 km während des Wettbewerbszeitraums. Alle Läufe zählen."/>
            <column name="created_at" valueComputed="DATE_SUB(NOW(), INTERVAL 60 DAY)"/>
            <column name="updated_at" valueComputed="DATE_SUB(NOW(), INTERVAL 5 DAY)"/>
        </insert>

        <!-- Competition 7: Weekend Warrior Challenge -->
        <insert tableName="competitions">
            <column name="name" value="Weekend Warrior Challenge"/>
            <column name="description" value="Laufe jeden Samstag und Sonntag mindestens 5km. Perfekt für Berufstätige!"/>
            <column name="competition_type" value="WEEKEND_WARRIOR"/>
            <column name="start_date" valueComputed="DATE_SUB(NOW(), INTERVAL 3 DAY)"/>
            <column name="end_date" valueComputed="DATE_ADD(NOW(), INTERVAL 25 DAY)"/>
            <column name="status" value="ACTIVE"/>
            <column name="difficulty" value="BEGINNER"/>
            <column name="max_participants" valueNumeric="150"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Keine besonderen Anforderungen"/>
            <column name="rules" value="Mindestens 5km an jedem Wochenende (Samstag und Sonntag). 4 Wochenenden komplett absolvieren."/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>

        <!-- Competition 8: Early Bird Sprint -->
        <insert tableName="competitions">
            <column name="name" value="Early Bird Sprint Series"/>
            <column name="description" value="Wer läuft am frühesten? Alle Läufe vor 7 Uhr morgens zählen!"/>
            <column name="competition_type" value="TIME_BASED_CHALLENGE"/>
            <column name="start_date" valueComputed="DATE_SUB(NOW(), INTERVAL 8 DAY)"/>
            <column name="end_date" valueComputed="DATE_ADD(NOW(), INTERVAL 22 DAY)"/>
            <column name="status" value="ACTIVE"/>
            <column name="difficulty" value="INTERMEDIATE"/>
            <column name="max_participants" valueNumeric="60"/>
            <column name="entry_fee" valueNumeric="0"/>
            <column name="prize_pool" valueNumeric="0"/>
            <column name="is_public" valueBoolean="true"/>
            <column name="requirements" value="Früh aufstehen können!"/>
            <column name="rules" value="Läufe müssen vor 7:00 Uhr morgens starten. Gesamtanzahl der Früh-Läufe zählt."/>
            <column name="created_at" valueComputed="NOW()"/>
            <column name="updated_at" valueComputed="NOW()"/>
        </insert>

        <rollback>
            <delete tableName="competitions">
                <where>name IN ('Frankfurt 5K Challenge', 'Main-Ufer Distance Race', '30-Tage Konsistenz Challenge',
                'Ostpark 10K Speed Run', 'Stadtwald Trail Master', 'Winter Marathon Challenge',
                'Weekend Warrior Challenge', 'Early Bird Sprint Series')</where>
            </delete>
        </rollback>
    </changeSet>

</databaseChangeLog>
