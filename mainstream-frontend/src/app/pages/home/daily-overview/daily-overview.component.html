<!-- Daily Overview Section -->
<section class="daily-overview-section">
  <div class="container">
    <!-- Authenticated View -->
    @if (isAuthenticated && !loading) {
      <div class="daily-overview-header">
        <h2>
          <mat-icon>today</mat-icon>
          {{ 'dailyOverview.authenticated.title' | transloco }}
        </h2>
      </div>

      <div class="daily-overview-grid">
        <!-- Today's Stats Card -->
        <mat-card class="stat-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="stat-icon distance-icon">directions_run</mat-icon>
            <mat-card-title>{{ 'dailyOverview.authenticated.todayDistance' | transloco }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="stat-value">{{ todayDistance.toFixed(2) }} <span class="unit">km</span></div>
            <div class="stat-progress">
              <mat-progress-bar
                mode="determinate"
                [value]="progressPercentage">
              </mat-progress-bar>
              <div class="progress-text">
                @if (remainingDistance > 0) {
                  <span>{{ 'dailyOverview.authenticated.remainingToGoal' | transloco: { remaining: remainingDistance.toFixed(2), goal: dailyGoalKm } }}</span>
                } @else {
                  <span>{{ 'dailyOverview.authenticated.goalAchieved' | transloco }}</span>
                }
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Today's Duration Card -->
        <mat-card class="stat-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="stat-icon time-icon">schedule</mat-icon>
            <mat-card-title>{{ 'dailyOverview.authenticated.todayTime' | transloco }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="stat-value">{{ formatDuration(todayDuration) }}</div>
            <div class="stat-detail">
              <span>{{ getRunsText() }}</span>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Available Trophies Card -->
        @if (availableTrophies.length > 0) {
          <mat-card class="trophy-card">
            <mat-card-header>
              <mat-icon mat-card-avatar class="stat-icon trophy-icon">emoji_events</mat-icon>
              <mat-card-title>{{ 'dailyOverview.authenticated.availableTrophies' | transloco }}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="trophy-list">
                @for (trophy of availableTrophies; track trophy.id) {
                  <div class="trophy-item">
                    <mat-icon class="trophy-item-icon">{{ getTrophyIcon(trophy) }}</mat-icon>
                    <div class="trophy-item-info">
                      <div class="trophy-item-name">{{ trophy.name }}</div>
                      <div class="trophy-item-desc">{{ trophy.description }}</div>
                    </div>
                  </div>
                }
              </div>
              <button mat-stroked-button color="primary" routerLink="/trophies" class="view-all-btn">
                {{ 'dailyOverview.authenticated.viewAllTrophies' | transloco }}
              </button>
            </mat-card-content>
          </mat-card>
        }
      </div>
    }

    <!-- Non-authenticated View -->
    @if (!isAuthenticated && !loading) {
      <div class="daily-overview-header">
        <h2>
          <mat-icon>today</mat-icon>
          {{ 'dailyOverview.guest.title' | transloco }}
        </h2>
      </div>

      <div class="daily-overview-grid guest">
        <mat-card class="motivational-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="motivational-icon">rocket_launch</mat-icon>
            <mat-card-title>{{ 'dailyOverview.guest.setGoals.title' | transloco }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p>{{ 'dailyOverview.guest.setGoals.description' | transloco }}</p>
          </mat-card-content>
          <mat-card-actions>
            <button mat-raised-button color="primary" routerLink="/auth/register">
              {{ 'dailyOverview.guest.setGoals.action' | transloco }}
            </button>
          </mat-card-actions>
        </mat-card>

        <mat-card class="motivational-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="motivational-icon">emoji_events</mat-icon>
            <mat-card-title>{{ 'dailyOverview.guest.collectTrophies.title' | transloco }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p>{{ 'dailyOverview.guest.collectTrophies.description' | transloco }}</p>
          </mat-card-content>
          <mat-card-actions>
            <button mat-stroked-button color="primary" routerLink="/auth/login">
              {{ 'dailyOverview.guest.collectTrophies.action' | transloco }}
            </button>
          </mat-card-actions>
        </mat-card>

        <mat-card class="motivational-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="motivational-icon">groups</mat-icon>
            <mat-card-title>{{ 'dailyOverview.guest.joinCommunity.title' | transloco }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p>{{ 'dailyOverview.guest.joinCommunity.description' | transloco }}</p>
          </mat-card-content>
          <mat-card-actions>
            <button mat-stroked-button color="primary" routerLink="/competitions">
              {{ 'dailyOverview.guest.joinCommunity.action' | transloco }}
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    }

    <!-- Loading State -->
    @if (loading) {
      <div class="loading-state">
        <mat-icon class="loading-icon">hourglass_empty</mat-icon>
        <p>{{ 'dailyOverview.loading' | transloco }}</p>
      </div>
    }
  </div>
</section>
