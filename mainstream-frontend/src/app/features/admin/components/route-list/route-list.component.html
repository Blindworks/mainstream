<div class="route-list-container">
  <div class="route-header">
    <h3>Vordefinierte Routen</h3>
  </div>

  <div class="header-actions">
    <button (click)="loadRoutes()" [disabled]="loading" class="btn btn-secondary">
      <span *ngIf="!loading">â†» Aktualisieren</span>
      <span *ngIf="loading">LÃ¤dt...</span>
    </button>
    <button (click)="toggleFilter()" class="btn btn-secondary">
      <span *ngIf="!showActiveOnly">Nur Aktive anzeigen</span>
      <span *ngIf="showActiveOnly">Alle anzeigen</span>
    </button>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-error">
    {{ error }}
  </div>

  <!-- Loading -->
  <div *ngIf="loading && routes.length === 0" class="loading">
    <div class="spinner-large"></div>
    <p>Lade Routen...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && routes.length === 0" class="empty-state">
    <div class="empty-icon">ğŸ“</div>
    <h3>Keine Routen gefunden</h3>
    <p *ngIf="showActiveOnly">Es gibt momentan keine aktiven Routen.</p>
    <p *ngIf="!showActiveOnly">Lade die erste Route hoch!</p>
  </div>

  <!-- Routes List -->
  <div *ngIf="routes.length > 0" class="routes-grid">
    <div *ngFor="let route of routes" class="route-card">
      <div class="route-header">
        <h3>{{ route.name }}</h3>
        <span [class]="'badge ' + getStatusBadgeClass(route)">
          {{ getStatusText(route) }}
        </span>
      </div>

      <div class="route-description" *ngIf="route.description">
        <p>{{ route.description }}</p>
      </div>

      <!-- Route Image -->
      <div class="route-image-section">
        <div class="route-image-container" *ngIf="route.imageUrl">
          <img [src]="getRouteImageUrl(route)" [alt]="route.name" class="route-image">
        </div>
        <div class="route-image-placeholder" *ngIf="!route.imageUrl">
          <span class="placeholder-icon">
              <mat-icon>image</mat-icon>
          </span>
          <span class="placeholder-text">Kein Bild vorhanden</span>
        </div>
      </div>

      <div class="route-stats">
        <div class="stat">
          <span class="stat-label">Distanz</span>
          <span class="stat-value">{{ formatDistance(route.distanceMeters) }}</span>
        </div>
        <div class="stat">
          <span class="stat-label">HÃ¶henmeter â†‘</span>
          <span class="stat-value">{{ formatElevation(route.elevationGainMeters) }}</span>
        </div>
        <div class="stat">
          <span class="stat-label">HÃ¶henmeter â†“</span>
          <span class="stat-value">{{ formatElevation(route.elevationLossMeters) }}</span>
        </div>
        <div class="stat">
          <span class="stat-label">Trackpunkte</span>
          <span class="stat-value">{{ route.trackPointCount }}</span>
        </div>
      </div>

      <div class="route-meta">
        <div class="meta-item" *ngIf="route.city">
          <span class="meta-label">Stadt:</span>
          <span class="meta-value">{{ route.city }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">GPX-Datei:</span>
          <span class="meta-value">{{ route.originalFilename }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Erstellt:</span>
          <span class="meta-value">{{ formatDate(route.createdAt) }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Start:</span>
          <span class="meta-value">
            {{ route.startLatitude.toFixed(6) }}, {{ route.startLongitude.toFixed(6) }}
          </span>
        </div>
      </div>

      <div class="route-actions">
        <button mat-raised-button (click)="showRouteOnMap(route)" class="ms-raised">
          Karte anzeigen
        </button>
        <button mat-raised-button class="ms-raised" (click)="editRoute(route)">
          Bearbeiten
        </button>
        <button mat-raised-button (click)="toggleRouteStatus(route)" class="ms-raised">
          <span *ngIf="route.isActive">
              Deaktivieren
          </span>
          <span *ngIf="!route.isActive">
              Aktivieren
          </span>
        </button>

        <label [for]="'imageUpload' + route.id" class="btn btn-secondary">
          <span *ngIf="!route.imageUrl">Bild hochladen</span>
          <span *ngIf="route.imageUrl">Bild Ã¤ndern</span>
        </label>
        <input
          [id]="'imageUpload' + route.id"
          type="file"
          accept="image/jpeg,image/jpg,image/png,image/gif,image/webp"
          (change)="onImageUpload($event, route)"
          style="display: none"
        />
        <button
          *ngIf="route.imageUrl"
          (click)="deleteRouteImage(route)"
          class="btn btn-danger"
        >
          ğŸ—‘ï¸ Bild lÃ¶schen
        </button>
      </div>
    </div>
  </div>
</div>
