<div class="routes-list-container">
  <!-- Tabs for filtering -->
  <mat-tab-group (selectedIndexChange)="onTabChange($event)" [selectedIndex]="currentTab">
    <mat-tab label="Aktive Routen"></mat-tab>
    <mat-tab label="Alle Routen"></mat-tab>
  </mat-tab-group>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Routen werden geladen...</p>
  </div>

  <!-- Routes List (Vertical) -->
  <div *ngIf="!isLoading && hasUserCity() && routes.length > 0" class="routes-wrapper">
    <div class="routes-list">
      <mat-card *ngFor="let route of routes" class="route-card">
        <div class="route-card-content">
          <!-- Route Image -->
          <div class="route-image">
            <img [src]="getRouteImageUrl(route)"
                 [alt]="route.name"
                 class="route-map-image">
          </div>

          <!-- Route Info -->
          <div class="route-info">
            <h3 class="route-name">{{ route.name }}</h3>
            <div style="display: flex; align-items: baseline; gap: 15px">
                <p class="route-distance" >{{ formatDistance(route.distanceMeters) }}</p>
                <p class="route-city" *ngIf="route.city" >
                <mat-icon class="city-icon">location_city</mat-icon>
                {{ route.city }}
                </p>
            </div>
            <button mat-raised-button (click)="onShowDetails(route, $event)" class="ms-raised">
              <mat-icon>info</mat-icon>
              Details
            </button>
          </div>

          <!-- Route Statistics -->
          <div class="route-stats" *ngIf="route.stats">
            <div class="stat-item">
              <div class="stat-label">Heute</div>
              <div class="stat-value">{{ route.stats.todayCount }}</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Diese Woche</div>
              <div class="stat-value">{{ route.stats.thisWeekCount }}</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Diesen Monat</div>
              <div class="stat-value">{{ route.stats.thisMonthCount }}</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Dieses Jahr</div>
              <div class="stat-value">{{ route.stats.thisYearCount }}</div>
            </div>
          </div>
        </div>
      </mat-card>
    </div>
  </div>

  <!-- No City Set Warning -->
  <div *ngIf="!isLoading && !hasUserCity()" class="no-routes">
    <mat-icon class="no-routes-icon">location_city</mat-icon>
    <h3>Keine Stadt angegeben</h3>
    <p>Bitte geben Sie Ihre Stadt in Ihrem Profil an, um Routen zu sehen.</p>
    <button mat-raised-button color="primary" (click)="navigateToProfile()">
      <mat-icon>person</mat-icon>
      Zum Profil
    </button>
  </div>

  <!-- No Routes State -->
  <div *ngIf="!isLoading && hasUserCity() && routes.length === 0" class="no-routes">
    <mat-icon class="no-routes-icon">route</mat-icon>
    <h3>Keine Routen gefunden</h3>
    <p>Es gibt derzeit keine Routen in Ihrer Stadt.</p>
  </div>
</div>
